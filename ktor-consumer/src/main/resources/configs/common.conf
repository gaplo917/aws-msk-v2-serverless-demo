ktor {
  deployment {
    port = 8080
    port = ${?PORT}
  }
  application {
    modules = [ com.gaplotech.mskdemo.ApplicationKt.module ]
  }
  logging {
    level = INFO
  }
}

kafka {
  topic {
    order.execution.report = "order.execution.report"
    order.candlestick.minute = "order.candlestick.minute"
    order.sliding.aggregate.twentyfourhour = "order.sliding.aggregate.twentyfourhour"

    store.order.candlestick.minute.aggregated = "store.order.candlestick.minute.aggregated"
    store.order.sliding.aggregate.twentyfourhour = "store.order.sliding.aggregate.twentyfourhour"
  }

  stream {
    application.id = "com.gaplotech.mskdemo.kafka.stream.writer"

    auto.offset.reset = "earliest" // or latest

    default.key.serde = "org.apache.kafka.common.serialization.Serdes$StringSerde"
    default.value.serde = "org.apache.kafka.common.serialization.Serdes$ByteArraySerde"

    // throttle by 10MB cache / 1 seconds updates
    cache.max.bytes.buffering = 10485760 // 10MB, 10 * 1024 * 1024L
    commit.interval.ms = 1000

    num.stream.threads = 4
  }
}